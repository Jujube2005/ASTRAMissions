<div class="invite-dialog-container">
    <div class="dialog-header">
        <div class="header-content">
            <div class="icon-wrapper">
                <span class="material-symbols-outlined">person_add</span>
            </div>
            <h2>Recruit Agent</h2>
        </div>
    </div>

    <div class="dialog-content custom-scrollbar">
        <!-- Search Field -->
        <div class="search-box">
            <span class="material-symbols-outlined">search</span>
            <input class="search-input" type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()"
                placeholder="Locate brawler in database...">
        </div>

        <!-- User List -->
        <div class="user-list">
            @for(user of filteredUsers; track user.id) {
            <div class="user-item">
                <div class="user-info">
                    <div class="avatar-frame">
                        <img [src]="user.avatar_url || 'https://api.dicebear.com/7.x/bottts/svg?seed=' + user.display_name"
                            alt="Avatar" />
                    </div>
                    <div class="details">
                        <span class="name">{{user.display_name}}</span>
                        <span class="status">Active</span>
                    </div>
                </div>

                <div class="actions">
                    <button class="invite-btn" (click)="invite(user)" [disabled]="isInvited(user.id)"
                        *ngIf="!currentMembers.has(user.id)">
                        <span class="material-symbols-outlined">{{ isInvited(user.id) ? 'check' : 'add' }}</span>
                    </button>
                    <span *ngIf="currentMembers.has(user.id)"
                        class="text-[10px] uppercase font-bold text-emerald-400 opacity-50 px-3">Assigned</span>
                </div>
            </div>
            } @empty {
            <div class="empty-search">
                <div class="icon-wrapper">
                    <span class="material-symbols-outlined">person_search</span>
                </div>
                <p>No operatives found</p>
            </div>
            }
        </div>
    </div>

    <div class="dialog-actions">
        <button class="close-btn" mat-dialog-close>Close Uplink</button>
    </div>
</div>